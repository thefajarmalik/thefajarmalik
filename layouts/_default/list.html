{{ define "main" }}
<section class="py-12 bg-white dark:bg-gray-800">
  <div class="w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Enhanced header with better styling -->
    <div class="mb-12">
      <h1 class="text-4xl font-bold mb-6 font-heading text-gray-900 dark:text-white">{{ .Title }}</h1>
      <div class="prose prose-lg markdown-content dark:prose-invert prose-gray max-w-4xl">
        {{ .Content }}
      </div>
    </div>

    <!-- Enhanced grid with better visual design -->
    <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
      {{ range .Pages.ByWeight }}
      <a href="{{ .RelPermalink }}" class="block group">
        <article class="bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-700 dark:to-gray-800 rounded-xl shadow-md hover:shadow-xl transition-all duration-300 hover:-translate-y-2 h-full border border-gray-200 dark:border-gray-600 overflow-hidden project-card opacity-0" data-animate>
          {{ if .Params.featured_image }}
          <div class="relative overflow-hidden">
            <img 
              src="{{ .Params.featured_image }}" 
              alt="{{ .Title }}" 
              class="w-full h-64 object-cover bg-gray-100 dark:bg-gray-800 transition-transform duration-300 group-hover:scale-105"
              loading="lazy"
            >
            <!-- Overlay effect on hover -->
            <div class="absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
          </div>
          {{ else }}
          <!-- Default placeholder with icon -->
          <div class="h-64 bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900 dark:to-blue-800 flex items-center justify-center">
            <i class="fas fa-project-diagram text-4xl text-blue-400 dark:text-blue-300"></i>
          </div>
          {{ end }}
          
          <div class="p-6">
            <!-- Enhanced title with better typography -->
            <h2 class="text-xl font-semibold mb-3 text-gray-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors duration-300 flex items-center">
              <i class="fas fa-arrow-right mr-2 text-blue-500 dark:text-blue-400 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></i>
              {{ .Title }}
            </h2>
            
            <!-- Enhanced description -->
            {{ if .Description }}
            <p class="text-gray-600 dark:text-gray-300 mb-4 leading-relaxed text-sm">{{ .Description }}</p>
            {{ end }}
            
            <!-- Enhanced tags with better styling -->
            {{ if .Params.tags }}
            <div class="flex flex-wrap gap-2">
              {{ range .Params.tags }}
              <span class="bg-gradient-to-r from-blue-100 to-blue-200 dark:from-blue-800 dark:to-blue-700 text-blue-800 dark:text-blue-200 px-3 py-1 rounded-full text-xs font-medium border border-blue-200 dark:border-blue-600 transition-all duration-300 hover:scale-105">
                {{ . }}
              </span>
              {{ end }}
            </div>
            {{ end }}
            
            <!-- Read more indicator -->
            <div class="mt-4 flex items-center text-blue-600 dark:text-blue-400 text-sm font-medium opacity-0 group-hover:opacity-100 transition-opacity duration-300">
              <span>Learn more</span>
              <i class="fas fa-chevron-right ml-2 transition-transform duration-300 group-hover:translate-x-1"></i>
            </div>
          </div>
        </article>
      </a>
      {{ end }}
    </div>
</section>

<script>
// Initialize animations when DOM is ready
document.addEventListener('DOMContentLoaded', function() {
  // Initialize card animations
  initCardAnimations();
});

function initCardAnimations() {
  const cards = document.querySelectorAll('[data-animate]');
  
  // Set initial state
  gsap.set(cards, {
    opacity: 0,
    y: 30,
    scale: 0.95
  });
  
  // Create scroll trigger for cards
  ScrollTrigger.batch(cards, {
    start: "top 85%",
    end: "bottom 15%",
    onEnter: (elements) => {
      gsap.to(elements, {
        opacity: 1,
        y: 0,
        scale: 1,
        duration: 0.6,
        stagger: 0.1,
        ease: "back.out(1.7)"
      });
    },
    onLeave: (elements) => {
      gsap.to(elements, {
        opacity: 0,
        y: -30,
        scale: 0.95,
        duration: 0.3
      });
    },
    onEnterBack: (elements) => {
      gsap.to(elements, {
        opacity: 1,
        y: 0,
        scale: 1,
        duration: 0.6,
        stagger: 0.1,
        ease: "back.out(1.7)"
      });
    },
    onLeaveBack: (elements) => {
      gsap.to(elements, {
        opacity: 0,
        y: 30,
        scale: 0.95,
        duration: 0.3
      });
    }
  });
}

// Initialize hover animations for project cards
function initHoverAnimations() {
  const cards = document.querySelectorAll('.project-card');
  
  cards.forEach(card => {
    card.addEventListener('mouseenter', function() {
      gsap.to(this, {
        scale: 1.02,
        duration: 0.3,
        ease: "power2.out"
      });
    });
    
    card.addEventListener('mouseleave', function() {
      gsap.to(this, {
        scale: 1,
        duration: 0.3,
        ease: "power2.out"
      });
    });
  });
}

// Initialize animations when GSAP is available
if (typeof gsap !== 'undefined' && typeof ScrollTrigger !== 'undefined') {
  initCardAnimations();
  initHoverAnimations();
} else {
  // Wait for GSAP to load
  const checkGSAP = setInterval(() => {
    if (typeof gsap !== 'undefined' && typeof ScrollTrigger !== 'undefined') {
      clearInterval(checkGSAP);
      initCardAnimations();
      initHoverAnimations();
    }
  }, 100);
}
</script>
{{ end }} 